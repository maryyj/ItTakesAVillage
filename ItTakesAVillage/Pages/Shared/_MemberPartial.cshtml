@model List<ItTakesAVillage.Models.UserGroup>
@using ItTakesAVillage.Contracts
@using Microsoft.AspNetCore.Identity
@inject UserManager<ItTakesAVillageUser> _userManager

<link rel="stylesheet" href="~/css/group.css" />
<div class="container w-75  mb-4">
    <div class="accordion" id="notification-accordion">
            <div class="accordion-item border-0">
            <h2 class="accordion-header" id="heading_usersAccordion">
                    <button class="accordion-button collapsed "
                            type="submit"
                            data-bs-toggle="collapse"
                        data-bs-target="#collapse_usersAccordion"
                            aria-expanded="false"
                            aria-controls="collapse_usersAccordion">
                        <i class="bi bi-circle-fill pinkFontColor p-2"></i>
                        <span class="fw-bold">Medlemmar</span>
                    </button>
                </h2>

            <div id="collapse_usersAccordion" class="accordion-collapse collapse " aria-labelledby="heading_usersAccordion" data-bs-parent="#notification-accordion">
                    <div class="accordion-body">
                        @foreach (var member in Model)
                        {
                            if (member != null)
                            {
                                <div class="container d-flex pt-2 member-container">
                                    <p>@member.User.FirstName @member.User.LastName</p>
                                    @if (member.UserId == _userManager.GetUserId(User))
                                    {
                                        <form method="post" asp-page-handler="RemoveFromGroup">
                                            <input type="hidden" name="userId" value="@member.UserId" />
                                            <input type="hidden" name="groupId" value="@member.GroupId" />
                                            <button type="submit" class="bi bi-x-circle delete-btn" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Ta bort från grupp"></button>
                                        </form>
                                    }
                                </div>
                            }
                        }
                    </div>
                </div>
            </div>
    </div>
</div>